regaining_rome = {
	test_vars_check = {
		available = {
			original_tag = RME
		}
		visible = {
			original_tag = RME
		}
		complete_effect = {
			if = {
				limit = { has_country_flag = RME_check_territories }
				clr_country_flag = RME_check_territories
			}
			else = {
				set_country_flag = RME_check_territories
			}
		}
	}
	test_vars_restore = {
		icon = generic_form_nation
		available = {
			FROM = {
				is_subject = no
				NOT = { is_in_faction_with = RME }
			}
		}

		visible = {
			FROM = {
				exists = yes
			}
			has_country_flag = RME_check_territories
		}
		target_trigger = {
			FROM = {
				has_idea = RME_former_territory
				NOT = { is_subject_of = RME }
				any_owned_state = {
					#is_core_of = RME
				}
			}
		}

		#cost = 50

		complete_effect = {
			if = {
				limit = {
					has_completed_focus = RME_reestablish_roman_hegemony
				}
				FROM = {
					TESB_check_puppet_willingness = yes
				}
			}
			if = {
				limit = {
					has_completed_focus = RME_restore_rome_focus
				}
				FROM = {
					TESB_check_faction_willingness = yes
				}
			}
		}
	}

	test_rme_vars = {
		available = { always = yes }
		visible = { always = yes }
		complete_effect = {
			every_country = {
				limit = {
					has_idea = RME_former_territory
					is_subject = no
				}
				country_event = { id = tesb_restore_rome.10 }
			}
			random_country = {
				limit = {
					has_idea = RME_former_territory
					is_subject_of = RME
				}
				RME = {
					annex_country = { target = PREV transfer_troops = yes }
				}
			}
		}
	}
	negotiate_with_territory = {
		icon = generic_form_nation
		available = {
			has_completed_focus = RME_restoring_the_empire
			FROM = {
				is_subject = no
			}
			NOT = { has_war_with = FROM }
		}

		visible = {
			original_tag = RME
			FROM = {
				exists = yes
				NOT = { is_subject_of = RME }
				NOT = { is_in_faction_with = RME }
			}
		}
		target_trigger = {
			FROM = {
				exists = yes
				has_idea = RME_former_territory
				has_country_flag = RME_region_integration_started
				NOT = { is_subject_of = RME }
				NOT = { is_in_faction_with = RME }
			}
		}

		cost = 50

		complete_effect = {
			if = {
				limit = { has_completed_focus = RME_reestablish_roman_hegemony }
				FROM = {
					country_event = { id = tesb_restore_rome.10 hours = 1 }
				}
			}
			else_if = {
				limit = { has_completed_focus = RME_restore_rome_focus }
				FROM = {
					country_event = { id = tesb_restore_rome.20 hours = 1 }
				}
			}
			else = {
				country_event = { id = tesb_rome.115 hours = 1 }
			}
		}
	}
}


regaining_rome = {
	test_vars_check = {
		available = {
			original_tag = RME
		}
		visible = {
			original_tag = RME
		}
		complete_effect = {
			if = {
				limit = { has_country_flag = RME_check_territories }
				clr_country_flag = RME_check_territories
			}
			else = {
				set_country_flag = RME_check_territories
			}
		}
	}
	test_vars_restore = {
		icon = generic_form_nation
		available = {
			FROM = {
				is_subject = no
				NOT = { is_in_faction_with = RME }
			}
		}

		visible = {
			FROM = {
				exists = yes
			}
			has_country_flag = RME_check_territories
		}
		target_trigger = {
			FROM = {
				has_idea = RME_former_territory
				NOT = { is_subject_of = RME }
				any_owned_state = {
					#is_core_of = RME
				}
			}
		}

		#cost = 50

		complete_effect = {
			if = {
				limit = {
					has_completed_focus = RME_reestablish_roman_hegemony
				}
				FROM = {
					TESB_check_puppet_willingness = yes
				}
			}
			if = {
				limit = {
					has_completed_focus = RME_restore_rome_focus
				}
				FROM = {
					TESB_check_faction_willingness = yes
				}
			}
		}
	}

	test_rme_vars = {
		available = { always = yes }
		visible = { always = yes }
		complete_effect = {
			every_country = {
				limit = {
					has_idea = RME_former_territory
					is_subject = no
				}
				country_event = { id = tesb_restore_rome.10 }
			}
			random_country = {
				limit = {
					has_idea = RME_former_territory
					is_subject_of = RME
				}
				RME = {
					annex_country = { target = PREV transfer_troops = yes }
				}
			}
		}
	}
	
	negotiate_with_territory = {
		icon = generic_form_nation
		available = {
			has_completed_focus = RME_restoring_the_empire
			FROM = {
				is_subject = no
			}
			NOT = { has_war_with = FROM }
		}

		visible = {
			FROM = {
				exists = yes
				NOT = { is_subject_of = RME }
				NOT = { is_in_faction_with = RME }
			}
		}
		target_trigger = {
			FROM = {
				exists = yes
				has_idea = RME_former_territory
				has_country_flag = RME_region_integration_started
				NOT = { is_subject_of = RME }
				NOT = { is_in_faction_with = RME }
			}
		}

		cost = 50
		days_re_enable = 180

		complete_effect = {
			if = {
				limit = { has_completed_focus = RME_reestablish_roman_hegemony }
				FROM = {
					country_event = { id = tesb_restore_rome.10 hours = 1 }
				}
			}
			else_if = {
				limit = { has_completed_focus = RME_restore_rome_focus }
				FROM = {
					country_event = { id = tesb_restore_rome.20 hours = 1 }
				}
			}
			else = {
				country_event = { id = tesb_rome.115 hours = 1 }
			}
		}
		ai_will_do = {
			base = 1
			modifier = {
				has_completed_focus = RME_reestablish_roman_hegemony
				check_variable = { From.puppet_willingness < 0 }
				factor = 0.1
			}
			modifier = {
				has_completed_focus = RME_restore_rome_focus
				check_variable = { From.faction_willingness < 0 }
				factor = 0.1
			}
		}
	}
	
}

rome_civil_war_decisions = {
	prepare_black_sea_landing = {
		available = {
			ships_in_area = {
				area = 30
				size > 9 
			}
			any_other_country = {
				original_tag = RME
				ships_in_area = {
					area = 30
					size < 6 
				}
			}
		}
		visible = {
			has_government = democratic
		}
		fixed_random_seed = no
		custom_cost_trigger = {
			command_power > 30
		}
		complete_effect = {
			hidden_effect = {
				add_command_power = -30
			}
		}
		highlight_states = {
			OR = {
				state = 384
				state = 385
			}
		}
		custom_cost_text = command_power_more_than_30
		days_remove = 30
		fixed_random_seed = no
		remove_effect = {
			hidden_effect = { country_event = { id = tesb_rome.11 } }
			effect_tooltip = {
				random_list = {
					33 = { country_event = { id = tesb_rome.12 } }
					33 = { country_event = { id = tesb_rome.13 } }
					33 = { country_event = { id = tesb_rome.14 } }
				}
			}
		}
		ai_will_do = {
			base = 1
		}
	}
	prepare_ionia_landing = {
		available = {
			ships_in_area = {
				area = 69
				size > 9 
			}
			any_other_country = {
				original_tag = RME
				ships_in_area = {
					area = 69
					size < 6 
				}
			}
			NOT = {
				controls_state = 397
			}
		}
		visible = {
			has_government = absolutist
		}
		fixed_random_seed = no
		custom_cost_trigger = {
			command_power > 30
		}
		complete_effect = {
			hidden_effect = {
				add_command_power = -30
			}
		}
		highlight_states = {
			OR = {
				state = 397
				state = 391
			}
		}
		custom_cost_text = command_power_more_than_30
		days_remove = 30
		fixed_random_seed = no
		remove_effect = {
			hidden_effect = { country_event = { id = tesb_rome.15 } }
			effect_tooltip = {
				random_list = {
					33 = { country_event = { id = tesb_rome.16 } }
					33 = { country_event = { id = tesb_rome.17 } }
					33 = { country_event = { id = tesb_rome.18 } }
				}
			}
		}
		ai_will_do = {
			base = 1
		}
	}
}

burgundy_descisions = {
	fortify_zeeland = {
		fire_only_once = yes
		available = {
			OR = {
				BRG = { controls_state = 502 }
				FLD = { controls_state = 502 is_subject_of = BRG }
			}
			has_completed_focus = BRG_rhine_defenses
		}
		visible = {
			OR = {
				controls_state = 502
				FLD = { is_subject_of = BRG }
			}
		}
		days_remove = 70
		modifier = {
			political_power_gain = -0.5
		}
		remove_effect = {
			502 = {
				custom_effect_tooltip = fortify_zeeland.tt
				hidden_effect = {
					add_building_construction = {
						type = bunker
						level = 2
						province  = {
							all_provinces = yes
						}
						instant_build = yes
					}
					add_building_construction = {
						type = coastal_bunker
						level = 2
						province = 9431
						instant_build = yes
					}
				}
			}
		}
	}
}